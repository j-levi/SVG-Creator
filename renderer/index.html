<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VectorForge — Image to SVG</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- ─── Titlebar ─────────────────────────────────────────── -->
  <header id="titlebar">
    <div class="titlebar-drag"></div>
    <div class="titlebar-brand">
      <svg class="logo-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/>
        <line x1="12" y1="22" x2="12" y2="15.5"/>
        <polyline points="22 8.5 12 15.5 2 8.5"/>
        <polyline points="2 15.5 12 8.5 22 15.5"/>
        <line x1="12" y1="2" x2="12" y2="8.5"/>
      </svg>
      <span class="brand-text">VectorForge</span>
    </div>
  </header>

  <!-- ─── Main layout ──────────────────────────────────────── -->
  <main id="app">

    <!-- Drop zone (shown when no image loaded) -->
    <section id="dropzone" class="active">
      <div class="drop-content">
        <div class="drop-icon-container">
          <svg class="drop-icon" viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="8" y="8" width="48" height="48" rx="8" stroke-dasharray="6 4"/>
            <path d="M32 22v20M22 32h20" stroke-width="2.5" stroke-linecap="round"/>
          </svg>
        </div>
        <h2>Drop your image here</h2>
        <p>or <button id="btn-browse" class="link-btn">browse files</button></p>
        <span class="supported">JPEG · PNG · WebP · BMP · TIFF · GIF</span>
      </div>
    </section>

    <!-- Editor (shown after image loaded) -->
    <section id="editor" class="hidden">
      <div id="preview-area">
        <div class="preview-pane" id="pane-original">
          <div class="pane-label">Original</div>
          <div class="pane-img-wrap">
            <img id="img-original" alt="Original" />
          </div>
        </div>
        <div class="preview-divider">
          <div class="divider-line"></div>
          <svg class="divider-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="9 18 15 12 9 6"/></svg>
          <div class="divider-line"></div>
        </div>
        <div class="preview-pane" id="pane-svg">
          <div class="pane-label">SVG Preview</div>
          <div class="pane-img-wrap" id="svg-preview-wrap">
            <div id="svg-preview"></div>
            <div id="svg-loading" class="hidden">
              <div class="spinner"></div>
              <span>Converting…</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar controls -->
      <aside id="sidebar">
        <div class="sidebar-section">
          <h3>Mode</h3>
          <div class="mode-toggle">
            <button class="mode-btn active" data-mode="color">Color</button>
            <button class="mode-btn" data-mode="posterize">Poster</button>
            <button class="mode-btn" data-mode="bw">B&W</button>
          </div>
        </div>

        <div class="sidebar-section" id="section-colors">
          <h3>Colors <span id="val-colors" class="slider-val">8</span></h3>
          <input type="range" id="slider-colors" min="2" max="32" value="8" />
        </div>

        <div class="sidebar-section" id="section-threshold">
          <h3>Threshold <span id="val-threshold" class="slider-val">128</span></h3>
          <input type="range" id="slider-threshold" min="1" max="254" value="128" />
        </div>

        <div class="sidebar-section">
          <h3>Detail <span id="val-detail" class="slider-val">2</span></h3>
          <input type="range" id="slider-detail" min="0" max="20" value="2" />
          <p class="hint">Remove speckles smaller than this.</p>
        </div>

        <div class="sidebar-section">
          <h3>Smoothing <span id="val-smooth" class="slider-val">0.2</span></h3>
          <input type="range" id="slider-smooth" min="0" max="2" step="0.05" value="0.2" />
          <p class="hint">Curve optimisation tolerance.</p>
        </div>

        <div class="sidebar-section">
          <h3>Resolution <span id="val-resolution" class="slider-val">2048</span></h3>
          <input type="range" id="slider-resolution" min="256" max="4096" step="128" value="2048" />
          <p class="hint">Max processing dimension.</p>
        </div>

        <div class="sidebar-section toggle-section">
          <label class="toggle-label">
            <span>Invert</span>
            <input type="checkbox" id="chk-invert" />
            <span class="toggle-switch"></span>
          </label>
        </div>

        <div class="sidebar-actions">
          <button id="btn-convert" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 16 12 12 8 16"/><line x1="12" y1="12" x2="12" y2="21"/><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"/></svg>
            Convert
          </button>
          <button id="btn-export" class="btn btn-accent" disabled>
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Export SVG
          </button>
          <button id="btn-new" class="btn btn-ghost">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            New Image
          </button>
        </div>
      </aside>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="hidden"></div>

  <script src="renderer.js"></script>
</body>
</html>
